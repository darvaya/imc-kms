# ─────────────────────────────────────────────────────────────────────────────
# Outline KMS - Railway Production Environment Variables
# Copy these to Railway's environment variables section
# ─────────────────────────────────────────────────────────────────────────────

# ══════════════════════════════════════════════════════════════════════════════
# REQUIRED - Core Settings
# ══════════════════════════════════════════════════════════════════════════════

NODE_ENV=production

# Your Railway app URL (update after first deploy)
URL=https://your-app-name.up.railway.app

# Generate with: openssl rand -hex 32
SECRET_KEY=<generate-new-32-char-hex-key>
UTILS_SECRET=<generate-new-32-char-hex-key>

# ══════════════════════════════════════════════════════════════════════════════
# REQUIRED - Database (Railway PostgreSQL)
# ══════════════════════════════════════════════════════════════════════════════

# Use Railway's variable reference: ${{Postgres.DATABASE_URL}}
# Or paste the connection string directly
DATABASE_URL=postgresql://postgres:QzHIYTwIERfdTgvSadXAdGfbdrPRftOJ@yamanote.proxy.rlwy.net:25628/railway

# Disable SSL verification for Railway's internal network
PGSSLMODE=disable

# ══════════════════════════════════════════════════════════════════════════════
# REQUIRED - Redis (Add Railway Redis service)
# ══════════════════════════════════════════════════════════════════════════════

# Use Railway's variable reference: ${{Redis.REDIS_URL}}
REDIS_URL=<your-railway-redis-url>

# ══════════════════════════════════════════════════════════════════════════════
# REQUIRED - File Storage (Choose ONE option)
# ══════════════════════════════════════════════════════════════════════════════

# Option A: Local storage (files stored in container - NOT recommended for production)
# FILE_STORAGE=local
# FILE_STORAGE_LOCAL_ROOT_DIR=/var/lib/outline/data

# Option B: Railway Bucket / S3-compatible storage (RECOMMENDED)
FILE_STORAGE=s3
AWS_ACCESS_KEY_ID=<your-railway-bucket-access-key>
AWS_SECRET_ACCESS_KEY=<your-railway-bucket-secret-key>
AWS_S3_UPLOAD_BUCKET_NAME=<your-bucket-name>
AWS_S3_UPLOAD_BUCKET_URL=<your-bucket-public-url>
AWS_S3_FORCE_PATH_STYLE=true
AWS_REGION=us-east-1

# ══════════════════════════════════════════════════════════════════════════════
# REQUIRED - Authentication (Choose at least ONE)
# ══════════════════════════════════════════════════════════════════════════════

# --- Option 1: Google OAuth ---
# GOOGLE_CLIENT_ID=
# GOOGLE_CLIENT_SECRET=

# --- Option 2: Generic OIDC (Keycloak, Auth0, etc.) ---
# OIDC_CLIENT_ID=
# OIDC_CLIENT_SECRET=
# OIDC_AUTH_URI=
# OIDC_TOKEN_URI=
# OIDC_USERINFO_URI=
# OIDC_DISPLAY_NAME=SSO

# --- Option 3: Slack OAuth ---
# SLACK_CLIENT_ID=
# SLACK_CLIENT_SECRET=

# --- Option 4: Azure AD ---
# AZURE_CLIENT_ID=
# AZURE_CLIENT_SECRET=

# ══════════════════════════════════════════════════════════════════════════════
# OPTIONAL - Email (for notifications, invites, magic link auth)
# ══════════════════════════════════════════════════════════════════════════════

# SMTP_HOST=smtp.example.com
# SMTP_PORT=587
# SMTP_USERNAME=
# SMTP_PASSWORD=
# SMTP_FROM_EMAIL=noreply@yourdomain.com
# SMTP_SECURE=true

# ══════════════════════════════════════════════════════════════════════════════
# OPTIONAL - Other Settings
# ══════════════════════════════════════════════════════════════════════════════

FORCE_HTTPS=true
DEFAULT_LANGUAGE=en_US
FILE_STORAGE_UPLOAD_MAX_SIZE=26214400

# Allowed email domains for signup (comma-separated)
# ALLOWED_DOMAINS=yourdomain.com

# Error tracking
# SENTRY_DSN=

# Analytics
# GOOGLE_ANALYTICS_ID=
